"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(a,i,e){return i&&t(a.prototype,i),e&&t(a,e),a}}();!function(){var t={red:"#f44336",lightBlue:"#03a9f4",orange:"#ffc107",amber:"#ff9800",teal:"#00bcd4",purple:"#7726d3",green:"#00d45a",rowBgColor:"#4a4a4a"};document.addEventListener("DOMContentLoaded",function(){var a=function(){function t(a){_classCallCheck(this,t),this.options=a,this.container=a.container,this.maxX=a.maxX,this.xStep=a.xStep,this.columns=this.options.maxX/2,this.color=a.rowBgColor,this.margin=a.margin,this.data=a.data,this.nv=a.nv,this.drawStep=this.xStep*a.xDrawStep,this.durationResizeAnimation=500}return _createClass(t,[{key:"_addSvgContainer",value:function(){this.svg=this.container.append("div").append("svg")}},{key:"_getSvgSizes",value:function(){var t=getComputedStyle(this.svg[0][0]).width,a=getComputedStyle(this.svg[0][0]).height;this.svgWidth=t.slice(0,t.length-2),this.svgHeight=a.slice(0,a.length-2)-this.margin}},{key:"_addAxisLabels",value:function(){this.container.selectAll("svg .y-axis-label").remove(),this.container.select("svg").append("text").attr("class","y-axis-label").attr("x",-(23+7*this.options.yAxis.length)).attr("y","12").attr("transform","rotate(-90)").text(this.options.yAxis||""),this.container.select("svg").append("text").attr("class","x-axis-label").text(this.options.xAxis||"")}},{key:"_buildBackground",value:function(){this._addSvgContainer(),this._getSvgSizes();for(var t=[],a=0;a<this.columns;a++)t.push(this.svgHeight);this.barsLayout=this.svg.append("g").attr("class","bars").attr("transform","translate("+this.margin+", 0)").selectAll("rect").data(t).enter().append("rect"),this._addAxisLabels(),this._setBackgroundSizes()}},{key:"_setBackgroundSizes",value:function(){var t=(this.svgWidth-2*this.margin)/this.columns,a=t/2;this.barsLayout.attr("fill",this.color).attr("y",this.margin).attr("height",function(t,a){return t}).transition().duration(this.durationResizeAnimation).attr("width",a).attr("x",function(a,i){return i*t}),this.container.select("svg .x-axis-label").transition().duration(this.durationResizeAnimation).attr("x",this.svgWidth-this.margin-7-7*this.options.xAxis.length).attr("y",this.svgHeight-this.svgHeight/4+this.margin+14)}},{key:"drawChart",value:function(){this._buildBackground(),this._buildLegend(),this._buildNvGraph(),this._animateGraphs()}},{key:"_buildNvGraph",value:function(){var t=this;this._tuneNvGraph(),nv.addGraph(function(){return t.svg.datum(t.data).transition().duration(0).call(t.lineChart),nv.utils.windowResize(t.resizeBackground.bind(t)),nv.utils.windowResize(t.lineChart.update),t.lineChart})}},{key:"_tuneNvGraph",value:function(){this.lineChart=nv.models.lineChart().margin({top:this.margin,right:this.margin,bottom:0,left:this.margin}).useInteractiveGuideline(!0).xDomain([0,this.options.maxX]).yDomain([-1.01,3]).showLegend(!1).showYAxis(!0).showXAxis(!0).pointSize(5),this.lineChart.tooltip.enabled(!1),this.lineChart.interactiveLayer.tooltip.enabled(!1),this.lineChart.xAxis.showMaxMin(!1).tickValues([0]),this.lineChart.yAxis.showMaxMin(!1).ticks(10)}},{key:"_buildLegend",value:function(){var t=this.container.append("div").attr("class","legend").selectAll(".legend__item").data(this.data).enter().append("div").attr("class","legend__item");t.append("div").attr("class","legend__mark pull-left").style("background-color",function(t){return t.color}),t.append("div").attr("class","legend__text").text(function(t){return t.key})}},{key:"resizeBackground",value:function(){this._getSvgSizes(),this._setBackgroundSizes()}},{key:"_animateGraphs",value:function(){var t=this,a=0;this.timer=setInterval(function(){t._calcAllGraphs(a),t._drawNextStep(a),a+=t.xStep,t._checkEndOfAnimation(a)},Math.round(this.options.animationTime/(this.maxX/this.xStep/this.options.xDrawStep)))}},{key:"_drawNextStep",value:function(t){(0!=t&&t%this.drawStep==0||t==this.options.maxX)&&this.lineChart.update()}},{key:"_checkEndOfAnimation",value:function(t){t>=this.options.maxX+1&&(this.lineChart.duration(this.durationResizeAnimation),this.data.forEach(function(t){t.fillOpacity=.11}),clearInterval(this.timer),this.lineChart.update())}},{key:"_calcAllGraphs",value:function(t){this.data.forEach(function(a){a.graphFunction(t)})}}]),t}(),i=[{values:[],key:"Awesome",color:t.teal,graphFunction:function(t){var a=2.8,i=7.1,e=11;a>t?this.values.push({x:t,y:(3.43*t*t-6.7*t)/14}):i>t?this.values.push({x:t,y:-(t-7.1)*(t-7.1)/10.26+2.378}):e>t?this.values.push({x:t,y:-.4/(t-4.3)+2.53}):this.values.push({x:t,y:(t-11.4)*(t-11.4)*(t-11.4)/13+2.476})}},{values:[],key:"Good",color:t.orange,fillOpacity:1e-5,area:!0,graphFunction:function(t){var a=3,i=8.2;a>t?this.values.push({x:t,y:(3.255*t*t-9.6*t)/16}):i>t?this.values.push({x:t,y:(-1.055*(t-8.03)*(t-8.03)+27)/15}):this.values.push({x:t,y:(t-9)*(t-9)*(t-9)/120+1.805})}},{values:[],key:"Fail",color:t.red,graphFunction:function(t){var a=3.1,i=10.3;a>t?this.values.push({x:t,y:(2.255*t*t-9.1*t)/13}):i>t?this.values.push({x:t,y:.82*Math.sin((t-4.5)/2.1)}):this.values.push({x:t,y:-(t-13)*(t-13)*(t-13)/64})}}],e={container:d3.select(".line-chart__container"),maxX:13,xStep:.125,xDrawStep:4,rowBgColor:t.rowBgColor,margin:20,xAxis:"TIME",yAxis:"REVENUE",animationTime:400,data:i,nv:nv};if(e.container[0][0]){var n=new a(e);n.drawChart()}var s=[{values:[],key:"Sin(x)",color:t.lightBlue,fillOpacity:1e-5,area:!0,graphFunction:function(t){this.values.push({x:t,y:Math.sin(t)})}},{values:[],key:"Cos(x+10)+1/2",color:t.red,fillOpacity:1e-5,area:!0,graphFunction:function(t){this.values.push({x:t,y:Math.cos(t+10)+.5})}},{values:[],key:"Cos(x)+1",color:t.purple,fillOpacity:1e-5,area:!0,graphFunction:function(t){this.values.push({x:t,y:Math.cos(t)+1})}}],r={container:d3.select(".line-chart-1__container"),maxX:10,xStep:.125,xDrawStep:4,rowBgColor:t.rowBgColor,margin:20,xAxis:"X",yAxis:"Y",animationTime:400,data:s,nv:nv};if(r.container[0][0]){var o=new a(r);o.drawChart()}var h=[{values:[],key:"Teal graph",color:t.teal,fillOpacity:1e-5,area:!0,graphFunction:function(t){7>t?this.values.push({x:t,y:.2*Math.random()*t}):this.values.push({x:t,y:(.1*Math.random()+.2)*t-1})}},{values:[],key:"Orange graph",color:t.orange,fillOpacity:1e-5,area:!0,graphFunction:function(t){10>t?this.values.push({x:t,y:1.5*-Math.random()+2.5}):this.values.push({x:t,y:1.5})}},{values:[],key:"Green graph",color:t.green,fillOpacity:1e-5,graphFunction:function(t){(t+1)%4==0&&this.values.push({x:t,y:1.5*Math.random()+.6}),(t+1)%2>0&&this.values.push({x:t,y:.1*-Math.random()-.6})}}],l={container:d3.select(".line-chart-2__container"),maxX:14,xStep:.125,xDrawStep:4,rowBgColor:t.rowBgColor,margin:20,animationTime:400,xAxis:"X",yAxis:"Y",data:h,nv:nv};if(r.container[0][0]){var u=new a(l);u.drawChart()}})}();